!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@clean-js/presenter"),require("react")):"function"==typeof define&&define.amd?define(["@clean-js/presenter","react"],t):"object"==typeof exports?exports["@lujs/react-mvp-adaptor"]=t(require("@clean-js/presenter"),require("react")):e["@lujs/react-mvp-adaptor"]=t(e["@clean-js/presenter"],e.react)}(this,(function(e,t){return(()=>{"use strict";var r={681:t=>{t.exports=e},156:e=>{e.exports=t}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var u=o[e]={exports:{}};return r[e](u,u.exports,n),u.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{n.r(u),n.d(u,{Provider:()=>c,usePresenter:()=>s,usePresenterContext:()=>p});var e=n(681),t=n(156),r=n.n(t);const o=Object.freeze({autoUpdate:!0,registry:[]});function s(r,n=o){const u=Object.assign(Object.assign({},o),n),s=(0,t.useRef)(((t,r)=>{var o;return(null===(o=null==r?void 0:r.registry)||void 0===o?void 0:o.length)&&r.registry.forEach((t=>{e.container.register(t.token,{useClass:t.useClass})})),e.container.resolve(t)})(r,u)),[a,i]=(0,t.useState)(s.current.state);(0,t.useEffect)((()=>{const e=s.current,t=e.updateView;let r;return e.updateView=()=>{i((t=>e.state))},e.__init(),u.autoUpdate&&(r=e.__useAutoUpdate().unsubscribe),()=>{e.updateView=t,null==e||e.__destroy(),"function"==typeof r&&r()}}),[]);return{presenter:s.current,state:a}}const a=new WeakMap;function i(e){const t=a;let o;return t.has(e)?o=t.get(e):(o=r().createContext(null),t.set(e,o)),o}function c({children:e,Presenter:n,autoUpdate:u=o.autoUpdate}){const a=s(n,{autoUpdate:u}),c=(0,t.useMemo)((()=>i(n)),[n]);return r().createElement(c.Provider,{value:a},e)}function p(e){const r=(0,t.useMemo)((()=>i(e)),[e]);return(0,t.useContext)(r)}})(),u})()}));
